var fg = require('../index.js')
var spawn = require('child_process').spawn
var signalExit = require('signal-exit')

if (process.argv[2] === 'child') {
  console.log('stdout')
  switch (process.argv[3]) {
  case 'SIGTERM':
  case 'SIGHUP':
  case 'SIGKILL':
    process.kill(process.pid, process.argv[3])
    break

  case '0':
  case '1':
  case '2':
    process.exit(+process.argv[3])
    break
  }

  return
}

if (process.argv[2] === 'parent') {
  var cb = undefined

  // we can optionally assign a beforeExi